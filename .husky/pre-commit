#!/bin/sh
# Load Husky
. "$(dirname "$0")/_/husky.sh"

# 1. Type Check
echo "ğŸ³ Running type check..."
docker exec -t clipcoral_frontend npm run typecheck
if [ $? -ne 0 ]; then
  echo "âŒ ERROR: TypeScript found issues."
  echo "ğŸš« Commit blocked!"
  exit 1
fi

# 2. Lint Check
echo "ğŸ§¹ Running linter (ESLint)..."
docker exec -t clipcoral_frontend npm run lint
if [ $? -ne 0 ]; then
  echo "âŒ ERROR: Linter found style or logic issues."
  echo "ğŸš« Commit blocked!"
  exit 1
fi

echo "âœ… All clear. Proceeding to commit..."
exit 0